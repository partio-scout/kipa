{% extends "tupa/base.html" %}
{% block title %}{{tehtava.nimi}}{% endblock %}
{% block header %}
{{ block.super }}
<script type="text/javascript" src="/kipamedia/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/kipamedia/highlight-active-input.js"></script>
<script type="text/javascript" src="/kipamedia/jquery.maskedinput-1.3.js"></script>
<style type="text/css">
	label { width: 10em; float: left; }
	label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
</style>
<script type="text/javascript">
$(document).ready(function(){
    // get only input tags with class data-entry
    textboxes = $("input.numeric");
    // now we check to see which browser is being used
    if ($.browser.mozilla) {
        $(textboxes).keypress (checkForEnter);
    } else {
        $(textboxes).keydown (checkForEnter);
    }
});

function checkForEnter (event) {
    if (event.keyCode == 13) {
          currentBoxNumber = textboxes.index(this);
        if (textboxes[currentBoxNumber + 1] != null) {
            nextBox = textboxes[currentBoxNumber + 1]
            nextBox.focus();
            nextBox.select();
            event.preventDefault();
            return false;
        }
    }
}

jQuery(function($){
   $(".time").mask("99:99:99");
});
</script>
{% endblock header%}

{% block content %} 
<body>

<h1>{{tehtava.nimi}}</h1>

<form action="." name="form1" id="form1" method="post">     
<table width="600" border="0" cellpadding="2" cellspacing="0">
  <tr>
    <td width="100" class="tauluOtsikko">Tehtävä:</td>
    <td colspan="2" bgcolor="#E8EDFF">{{tehtava.jarjestysnro}} &nbsp; &nbsp; {{tehtava.nimi}}</td>
  </tr>
  <tr>
    <td class="tauluOtsikko">Sarja:</td>
    <td colspan="2" bgcolor="#E8EDFF">{{tehtava.sarja.nimi}}</td>
  </tr>
<!--  <tr>
    <td valign="middle" class="tauluOtsikko">Yhteyshenkilö:</td>
    <td valign="middle" bgcolor="#E8EDFF">&nbsp;</td>
    <td bgcolor="#E8EDFF">&nbsp;</td>
  </tr>-->
  <tr valign="middle">
    <td valign="middle" class="tauluOtsikko">Tehtävän tila:</td>
    {%ifequal tilanne "a"%}
    <td width="150" valign="middle" class='aloittamatta'><label>aloittamatta</label></td>
    {% endifequal %}
    {%ifequal tilanne "o"%}
    <td width="150" valign="middle" class='osittain'><label>syötetty osittain</label></td>
    {% endifequal %}
    {%ifequal tilanne "s"%}
    <td width="150" valign="middle" class='syotetty'><label>syötetty</label></td>
    {% endifequal %}
    {%ifequal tilanne "t"%}
    <td width="150" valign="middle" class='tarkistettu'><label>tarkistettu</label></td>
    {% endifequal %}
    {%ifequal tilanne "v"%}
    <td width="150" valign="middle" class='virhe'><label>syöttövirhe</label></td>
    {% endifequal %}

    
    <td bgcolor="#E8EDFF"><label><input type="checkbox" {%if tarkistettu %}checked="checked" {% endif %} name="tarkistettu" id="tarkistettu" />tarkistettu</label></td>
  </tr>
{% if tarkistus %}<tr bgcolor="#ff9900"><td colspan=3>Syötät tarkistustuloksia</td></tr>{% endif %}
</table>
<br />

   
    <table id="taulukko" border="0" cellpadding="2" cellspacing="0">
        <tr>
            <th colspan="2">
            Osatehtävä:
            </th>
            {% for osatehtava in osatehtavat %}
               <th class="osatehtava_otsikko" colspan="{{osatehtava.syotemaarite_set.all|length}}">
                   Osatehtävä {{ osatehtava.nimi }} 
               </th>
            {% endfor %}
        </tr>
        <tr>
            <th colspan="2">
            Syötteen nimi:
            </th>
            {% for maarite in maaritteet %}
               <th>
                   {{ maarite.nimi }} 
               </th>
            {% endfor %}
        </tr>
        <tr>
            <th colspan="2">
            Syötteen tyyppi:
            </th>
            {% for maarite in maaritteet %}
               <th>
                   {{ maarite.tyyppi }} 
                   {% ifequal maarite.tyyppi "aika" %}(hh:mm:ss){% endifequal %}
               </th>
            {% endfor %}
        </tr>
        <tr>
            <th colspan="2">
            Syötteen kuvaus:
            </th>
            {% for maarite in maaritteet %}
               <th>
                   {{ maarite.kali_vihje }} 
               </th>
            {% endfor %}
        </tr>

        {% for vartio in syotteet %}
            <tr valign="top" class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
                  <td width="15">
                  {{ vartio.0.nro}}
                  </td>
		<td width="200">
                  {{ vartio.0.nimi }}
		</td>
                  {% for kentta in vartio.1 %}
                         <td{% if  kentta.syottovirhe %} 
                                bgcolor="#FF4F00"
                         {%endif%}>
                         
                         {{kentta.errors}}
                         {{kentta.arvo}}
                         {{kentta.tarkistus}}
                         </td>
                  {% endfor %}
            </tr>
        {% endfor %}

     
    </table>
    {% include "tupa/tallenna.html" %}
    </form>

<p>
e - vartio ei ole tehnyt tehtävää<br />
h - vartion suoritus on hylätty<br />
</p>

<p><a href="{{maaritys_url}}">Tehtävän määrittely</a></p>
<p><a href="{{tulokset_url}}">Tämän sarjan tulokset</a></p>

<!-- tarvitaan, jotta enterillä pääsisi seuraavaan kenttään, pitää olla sivun lopussa, formin pitää olla nimeltään form1 -->
<script type='text/javascript'>	
	document.forms.form1.elements[1].focus();
</script>
	
<script type="text/javascript" language="javascript" src="/kipamedia/tooltip.js"></script>

<script type="text/javascript">
// Initialize the input highlight script
initInputHighlightScript();
</script> 

{% endblock %}

